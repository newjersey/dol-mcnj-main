<VirtualHost *:443>
  ServerName mycareer.nj.gov
  ServerAdmin webmaster@localhost
  DocumentRoot /var/www/html
  SSLEngine on
  SSLCertificateFile /etc/ssl/certs/mycareer.2026.cert.pem
  SSLCertificateKeyFile /etc/ssl/private/mycareer.nj.gov.key
  SSLCertificateChainFile /etc/ssl/certs/digicert.chain.pem
  ProxyPreserveHost On
  ProxyVia Full
  <Proxy *>
    Require all granted
  </Proxy>
  
  # ============================
  # NEW INTEGRATED SETUP: Everything proxies to Express server on port 8080
  # Express now serves both API routes (/api/*) and frontend assets
  # ============================
  
  # Proxy ALL traffic to the Express server on port 8080
  # Express will handle:
  # - API routes (/api/*)
  # - Static assets (/_next/*, /static/*, etc.)
  # - Frontend pages (/, /training, /occupation/*, etc.)
  ProxyPass "/" "http://localhost:8080/"
  ProxyPassReverse "/" "http://localhost:8080/"
  
  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>