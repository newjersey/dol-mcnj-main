@use "../settings" as settings;
@use "../system-colors" as systemColors;

.single-path {
  list-style: none;
  padding: 0;
  display: flex;
  align-items: center;
  gap: settings.$size-28;
  overflow: auto;
  padding: settings.$size-8 settings.$size-2;
  -webkit-overflow-scrolling: touch;

  .arrow {
    width: 0;
    height: 0;
    border-top: settings.$size-10 solid transparent;
    border-bottom: settings.$size-10 solid transparent;
    display: block;
    position: absolute;
    top: 50%;
    right: calc(100% + 0px);
    transform: translateY(-50%);
    z-index: 10;
    border-top: settings.$size-5 solid systemColors.$gray-cool-5;
    border-bottom: settings.$size-5 solid systemColors.$gray-cool-5;
    border-left: settings.$size-10 solid settings.$base;
  }

  li {
    display: flex;
    flex-direction: column;
    gap: 32px;
    margin: 0;

    &:not(.tall) {
      &:first-of-type {
        .path-stop {
          &:after {
            display: none;
          }
        }
      }
    }

    &:first-of-type {
      .path-stop {
        &:before {
          content: none;
        }
        .arrow {
          display: none;
        }
      }
    }

    &:last-of-type {
      .path-stop {
        &:after {
          content: none;
        }

        .path-connector {
          display: none !important;
        }
      }
    }

    .path-connector {
      position: absolute;
    }

    + li {
      &.tall {
        margin-left: settings.$size-30;
        .path-stop {
          .prev-path-connector {
            right: calc(100% + (settings.$size-24 - settings.$size-1));
          }

          &:first-of-type,
          &:last-of-type {
            .path-connector {
              left: calc(100% + (settings.$size-24 - settings.$size-1));
            }
          }

          .path-connector {
            left: calc(100% + (settings.$size-24 - settings.$size-1));
          }
        }

        + .tall {
          margin-left: 0;

          .path-stop {
            .prev-path-connector {
              right: calc(100% + (settings.$size-28 + settings.$size-1));
            }
          }
        }
      }

      &:not(.tall) {
        + li {
          &:not(.tall) {
            .path-stop {
              &.active,
              &:hover {
                .prev-path-connector {
                  right: calc(100% + settings.$size-3);
                }
              }

              &.active {
                background: settings.$tertiary;
                color: systemColors.$gray-cool-5;
                border-color: settings.$tertiary;
              }

              .prev-path-connector {
                display: block;
                height: settings.$size-10;
                background-color: systemColors.$gray-cool-5;
                width: settings.$size-4;
                top: 50%;
                position: absolute;
                transform: translateY(-50%);
                right: calc(100% + settings.$size-2);
              }

              &:after {
                background: systemColors.$gray-cool-5;
              }
            }
          }
        }

        .path-stop {
          &:after {
            background: settings.$base;
          }
          .arrow {
            display: block;
            right: calc(100% + settings.$size-6);
          }
        }
      }
    }

    &.tall {
      position: relative;
      margin-right: settings.$size-30;

      .path-stop {
        .arrow {
          right: calc(100% + settings.$size-6);
        }
      }

      &:first-of-type {
        .prev-path-connector {
          display: none;
        }
      }

      + .tall {
        margin-left: 0;

        .path-stop {
          .prev-path-connector {
            right: calc(100% + (settings.$size-28 + settings.$size-1));
          }
        }
      }

      + li:not(.tall) {
        .path-stop {
          .arrow {
            right: calc(100% + settings.$size-6);
          }
        }
      }

      .prev-path-connector {
        width: settings.$size-10;
        background-color: settings.$base;
        display: block;
        height: 135%;
        top: 50%;
        transform: translateY(-50%);
        right: calc(100% + (settings.$size-26 + settings.$size-1));
        z-index: 10;
        position: absolute;
      }

      .path-stop {
        position: relative;

        &:first-of-type {
          .path-connector,
          .prev-path-connector {
            top: calc(50% - settings.$size-5);
            transform: none;
            height: 100%;
          }
        }

        &:last-of-type {
          .path-connector,
          .prev-path-connector {
            top: auto;
            height: 100%;
            transform: none;
            bottom: calc(50% - settings.$size-5);
          }
        }

        &:before {
          width: (settings.$size-16 + settings.$size-1);
          right: calc(100% + settings.$size-16);
        }

        &:after {
          width: settings.$size-26 + settings.$size-1;
        }

        .path-connector {
          width: settings.$size-10;
          background-color: settings.$base;
          display: block;
          height: 135%;
          top: 50%;
          transform: translateY(-50%);
          left: calc(100% + (settings.$size-26 - settings.$size-3));
          z-index: 10;
        }
      }

      + li {
        &:not(.tall) {
          .path-stop {
            &:before {
              width: settings.$size-20;
              right: calc(100% + settings.$size-10);
            }
          }
        }
      }
    }

    .prev-path-connector {
      display: none;
    }
  }

  .path-stop {
    border: 2px solid settings.$base-dark;
    border-radius: 0.3rem;
    background-color: settings.$secondary-lighter;
    width: settings.$size-200;
    min-height: settings.$size-120;
    color: settings.$base-dark;
    cursor: pointer;
    padding: 0.3rem 0.8rem;
    position: relative;

    &:hover {
      border-color: settings.$tertiary;
      outline: 1px solid settings.$tertiary;
    }

    &.active {
      background: settings.$tertiary;
      color: systemColors.$gray-cool-5;
      border-color: settings.$tertiary;
      outline: 1px solid settings.$tertiary;
    }

    &:before {
      content: "";
      position: absolute;
      transform: translateY(-50%);
      top: 50%;
      width: settings.$size-10;
      height: settings.$size-10;
      display: block;
      background: settings.$base;
      right: calc(100% + settings.$size-16);
    }

    &:after {
      content: "";
      position: absolute;
      transform: translateY(-50%);
      top: 50%;
      width: calc(settings.$size-26 + settings.$size-5);
      height: settings.$size-10;
      display: block;
      background: settings.$base;
      left: calc(100% + settings.$size-6);
    }

    p {
      margin: 0;
      font-size: 0.8rem;
      line-height: 1.4;
    }

    .title {
      line-height: 1.2;
      font-size: settings.$size-16;
      text-align: center;
      margin: 0.2rem 0 0.6rem;
    }

    .salary {
      margin: 0 0 0.3rem;
    }
  }
}
